<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.quanlytoanhanhom4.controller.ResidentController"
            stylesheets="@../../css/modern-style.css"
            style="-fx-background-color: linear-gradient(to bottom right, #F7FAFF, #E5ECF6);">
    
    <!-- Center: Data Table and Search -->
    <center>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="scroll-pane-gradient">
            <content>
                <VBox spacing="28" style="-fx-padding: 30; -fx-background-color: linear-gradient(to bottom right, #F7FAFF, #E5ECF6); -fx-min-height: 600;">
            
            <!-- Search and Filter Section -->
            <VBox spacing="12" styleClass="card card-resident">
                <HBox spacing="12" alignment="CENTER_LEFT">
                    <Label text="ðŸ”" style="-fx-font-size: 20px;"/>
                    <TextField fx:id="searchField" promptText="TÃ¬m kiáº¿m theo tÃªn, sá»‘ Ä‘iá»‡n thoáº¡i, email..." 
                               prefWidth="450" styleClass="text-field"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label text="Sá»‘ báº£n ghi/trang:" styleClass="text-sm" style="-fx-text-fill: #6B7280;"/>
                    <ComboBox fx:id="itemsPerPageCombo" prefWidth="100" styleClass="combo-box"
                              onAction="#handleItemsPerPageChange"/>
                    <Button fx:id="advancedFilterButton" text="ðŸ”½ Bá»™ lá»c nÃ¢ng cao" 
                            styleClass="btn-outline"
                            onAction="#handleToggleAdvancedFilter"/>
                </HBox>
                
                <!-- Advanced Filter Panel -->
                <VBox fx:id="advancedFilterPane" spacing="12" styleClass="filter-panel" 
                      visible="false" managed="false">
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Label text="Bá»™ lá»c nÃ¢ng cao" styleClass="filter-panel-header"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Button text="XÃ³a bá»™ lá»c" onAction="#handleClearFilters"
                                styleClass="btn-outline" style="-fx-font-size: 12px;"/>
                    </HBox>
                    <HBox spacing="16" alignment="CENTER_LEFT">
                        <VBox spacing="6" styleClass="input-group">
                            <Label text="Email" styleClass="form-label"/>
                            <TextField fx:id="filterEmailField" promptText="Lá»c theo email..." 
                                       prefWidth="200" styleClass="text-field"/>
                        </VBox>
                        <VBox spacing="6" styleClass="input-group">
                            <Label text="CMND/CCCD" styleClass="form-label"/>
                            <TextField fx:id="filterIdentityCardField" promptText="Lá»c theo CMND/CCCD..." 
                                       prefWidth="200" styleClass="text-field"/>
                        </VBox>
                        <VBox spacing="6" styleClass="input-group">
                            <Label text="Loáº¡i cÆ° dÃ¢n" styleClass="form-label"/>
                            <ComboBox fx:id="filterResidentTypeCombo" prefWidth="150" styleClass="combo-box"
                                      onAction="#handleAdvancedFilterChange"/>
                        </VBox>
                        <VBox spacing="6" styleClass="input-group">
                            <Label text="Giá»›i tÃ­nh" styleClass="form-label"/>
                            <ComboBox fx:id="filterGenderCombo" prefWidth="120" styleClass="combo-box"
                                      onAction="#handleAdvancedFilterChange"/>
                        </VBox>
                    </HBox>
                </VBox>
            </VBox>
            
            <!-- Table Section -->
            <VBox spacing="12" styleClass="card card-resident" VBox.vgrow="ALWAYS">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="ðŸ“‹ Danh sÃ¡ch cÆ° dÃ¢n" styleClass="card-header"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="statusLabel" styleClass="text-sm" style="-fx-text-fill: #10B981;"/>
                </HBox>
                
                <TableView fx:id="residentTable" prefHeight="500" styleClass="table-view" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colFullName" text="Há» tÃªn" prefWidth="200">
                            <style>
                                -fx-alignment: CENTER_LEFT;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colIdentityCard" text="CMND/CCCD" prefWidth="130">
                            <style>
                                -fx-alignment: CENTER;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colDateOfBirth" text="NgÃ y sinh" prefWidth="120">
                            <style>
                                -fx-alignment: CENTER;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colGender" text="Giá»›i tÃ­nh" prefWidth="100">
                            <style>
                                -fx-alignment: CENTER;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colPhone" text="Sá»‘ Ä‘iá»‡n thoáº¡i" prefWidth="140">
                            <style>
                                -fx-alignment: CENTER;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colEmail" text="Email" prefWidth="250">
                            <style>
                                -fx-alignment: CENTER_LEFT;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colAddress" text="Äá»‹a chá»‰" prefWidth="300">
                            <style>
                                -fx-alignment: CENTER_LEFT;
                            </style>
                        </TableColumn>
                        <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="120">
                            <style>
                                -fx-alignment: CENTER;
                            </style>
                        </TableColumn>
                    </columns>
                </TableView>
                
                <!-- Pagination -->
                <HBox spacing="10" alignment="CENTER_RIGHT" style="-fx-padding: 12 0 0 0;">
                    <Label fx:id="paginationInfoLabel" styleClass="text-sm" style="-fx-text-fill: #6B7280;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Pagination fx:id="pagination" styleClass="pagination"/>
                </HBox>
            </VBox>
                </VBox>
            </content>
        </ScrollPane>
    </center>
    
    <!-- Right: Form Panel -->
    <right>
        <VBox spacing="0" styleClass="card card-resident" style="-fx-min-width: 420; -fx-max-width: 420;">
            <!-- Header -->
            <VBox spacing="8" style="-fx-padding: 24 24 20 24; -fx-background-color: #2874A6;">
                <Label text="ðŸ“ ThÃ´ng tin CÆ° dÃ¢n" style="-fx-font-size: 20px; -fx-font-weight: 700; -fx-text-fill: white;"/>
            </VBox>
            
            <!-- Form Content -->
            <ScrollPane fitToWidth="true" vbarPolicy="AS_NEEDED" style="-fx-background: transparent; -fx-border-width: 0;">
                <VBox spacing="20" style="-fx-padding: 24;">
                    <!-- ThÃ´ng tin cÆ¡ báº£n -->
                    <VBox spacing="12">
                        <Label text="ThÃ´ng tin cÆ¡ báº£n" style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2874A6; -fx-padding: 0 0 8 0;"/>
                            <VBox spacing="6" styleClass="input-group input-group-required">
                            <Label text="Há» tÃªn *" styleClass="form-label"/>
                            <TextField fx:id="fullNameField" prefWidth="372" promptText="Nháº­p há» tÃªn Ä‘áº§y Ä‘á»§" styleClass="text-field"/>
                            </VBox>
                            <HBox spacing="12">
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="CMND/CCCD" styleClass="form-label"/>
                                <TextField fx:id="identityCardField" prefWidth="180" promptText="9-12 chá»¯ sá»‘" styleClass="text-field" style="-fx-text-fill: #000000;"/>
                                </VBox>
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="NgÃ y sinh" styleClass="form-label"/>
                                <DatePicker fx:id="dateOfBirthPicker" prefWidth="180" styleClass="combo-box" style="-fx-text-fill: #000000;"/>
                                </VBox>
                            </HBox>
                            <HBox spacing="12">
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="Giá»›i tÃ­nh" styleClass="form-label"/>
                                <ComboBox fx:id="genderCombo" prefWidth="180" styleClass="combo-box" style="-fx-text-fill: #000000;"/>
                                </VBox>
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="Tráº¡ng thÃ¡i" styleClass="form-label"/>
                                <ComboBox fx:id="statusCombo" prefWidth="180" styleClass="combo-box" style="-fx-text-fill: #000000;"/>
                                </VBox>
                            </HBox>
                        </VBox>
                    
                    <!-- ThÃ´ng tin liÃªn láº¡c -->
                    <VBox spacing="12">
                        <Label text="ThÃ´ng tin liÃªn láº¡c" style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2874A6; -fx-padding: 0 0 8 0;"/>
                            <HBox spacing="12">
                                <VBox spacing="6" styleClass="input-group input-group-required" HBox.hgrow="ALWAYS">
                                <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i *" styleClass="form-label"/>
                                <TextField fx:id="phoneField" prefWidth="180" promptText="10-11 chá»¯ sá»‘" styleClass="text-field"/>
                                </VBox>
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="Email" styleClass="form-label"/>
                                <TextField fx:id="emailField" prefWidth="180" promptText="email@example.com" styleClass="text-field"/>
                                </VBox>
                            </HBox>
                            <VBox spacing="6" styleClass="input-group">
                                <Label text="Äá»‹a chá»‰" styleClass="form-label"/>
                            <TextArea fx:id="addressArea" prefWidth="372" prefHeight="100" promptText="Nháº­p Ä‘á»‹a chá»‰ Ä‘áº§y Ä‘á»§" styleClass="text-area"/>
                        </VBox>
                    </VBox>
                    
                    <!-- LiÃªn há»‡ kháº©n cáº¥p -->
                    <VBox spacing="12">
                        <Label text="LiÃªn há»‡ kháº©n cáº¥p" style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2874A6; -fx-padding: 0 0 8 0;"/>
                            <HBox spacing="12">
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="Há» tÃªn" styleClass="form-label"/>
                                <TextField fx:id="emergencyContactField" prefWidth="180" promptText="TÃªn ngÆ°á»i liÃªn há»‡" styleClass="text-field"/>
                                </VBox>
                                <VBox spacing="6" styleClass="input-group" HBox.hgrow="ALWAYS">
                                    <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i" styleClass="form-label"/>
                                <TextField fx:id="emergencyPhoneField" prefWidth="180" promptText="10-11 chá»¯ sá»‘" styleClass="text-field"/>
                                </VBox>
                            </HBox>
                        </VBox>
                    
                    <!-- Ghi chÃº -->
                    <VBox spacing="12">
                        <Label text="Ghi chÃº" style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #2874A6; -fx-padding: 0 0 8 0;"/>
                            <VBox spacing="6" styleClass="input-group">
                                <Label text="Ghi chÃº" styleClass="form-label"/>
                            <TextArea fx:id="notesArea" prefWidth="372" prefHeight="100" promptText="Nháº­p ghi chÃº (náº¿u cÃ³)" styleClass="text-area"/>
                        </VBox>
                    </VBox>
                        </VBox>
                    </ScrollPane>
            
            <Separator style="-fx-padding: 0;"/>
            
            <!-- Action Buttons -->
            <VBox spacing="12" style="-fx-padding: 24; -fx-background-color: white;">
                <HBox spacing="12" alignment="CENTER">
                    <Button fx:id="addButton" text="ThÃªm má»›i" onAction="#handleAdd"
                            styleClass="btn-success" style="-fx-pref-width: 186; -fx-pref-height: 44; -fx-font-size: 14px;"/>
                    <Button fx:id="updateButton" text="Cáº­p nháº­t" onAction="#handleUpdate" 
                            disable="true"
                            styleClass="btn-primary" style="-fx-pref-width: 186; -fx-pref-height: 44; -fx-font-size: 14px;"/>
                </HBox>
                <Button fx:id="deleteButton" text="XÃ³a" onAction="#handleDelete" 
                        disable="true"
                        styleClass="btn-danger" style="-fx-pref-width: 384; -fx-pref-height: 44; -fx-font-size: 14px;"/>
                <Button fx:id="clearButton" text="LÃ m má»›i" onAction="#handleClear"
                        styleClass="btn-outline" style="-fx-pref-width: 384; -fx-pref-height: 44; -fx-font-size: 14px;"/>
            </VBox>
        </VBox>
    </right>
</BorderPane>
